{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.animationFrames = void 0;\n\nvar Observable_1 = require(\"../../Observable\");\n\nvar Subscription_1 = require(\"../../Subscription\");\n\nvar performanceTimestampProvider_1 = require(\"../../scheduler/performanceTimestampProvider\");\n\nvar animationFrameProvider_1 = require(\"../../scheduler/animationFrameProvider\");\n\nfunction animationFrames(timestampProvider) {\n  return timestampProvider ? animationFramesFactory(timestampProvider) : DEFAULT_ANIMATION_FRAMES;\n}\n\nexports.animationFrames = animationFrames;\n\nfunction animationFramesFactory(timestampProvider) {\n  var schedule = animationFrameProvider_1.animationFrameProvider.schedule;\n  return new Observable_1.Observable(function (subscriber) {\n    var subscription = new Subscription_1.Subscription();\n    var provider = timestampProvider || performanceTimestampProvider_1.performanceTimestampProvider;\n    var start = provider.now();\n\n    var run = function (timestamp) {\n      var now = provider.now();\n      subscriber.next({\n        timestamp: timestampProvider ? now : timestamp,\n        elapsed: now - start\n      });\n\n      if (!subscriber.closed) {\n        subscription.add(schedule(run));\n      }\n    };\n\n    subscription.add(schedule(run));\n    return subscription;\n  });\n}\n\nvar DEFAULT_ANIMATION_FRAMES = animationFramesFactory();","map":{"version":3,"sources":["../../../../../src/internal/observable/dom/animationFrames.ts"],"names":[],"mappings":";;;;;;;AAAA,IAAA,YAAA,GAAA,OAAA,CAAA,kBAAA,CAAA;;AACA,IAAA,cAAA,GAAA,OAAA,CAAA,oBAAA,CAAA;;AAEA,IAAA,8BAAA,GAAA,OAAA,CAAA,8CAAA,CAAA;;AACA,IAAA,wBAAA,GAAA,OAAA,CAAA,wCAAA,CAAA;;AA0EA,SAAgB,eAAhB,CAAgC,iBAAhC,EAAqE;AACnE,SAAO,iBAAiB,GAAG,sBAAsB,CAAC,iBAAD,CAAzB,GAA+C,wBAAvE;AACD;;AAFD,OAAA,CAAA,eAAA,GAAA,eAAA;;AAQA,SAAS,sBAAT,CAAgC,iBAAhC,EAAqE;AAC3D,MAAA,QAAQ,GAAK,wBAAA,CAAA,sBAAA,CAAL,QAAR;AACR,SAAO,IAAI,YAAA,CAAA,UAAJ,CAAuD,UAAA,UAAA,EAAU;AACtE,QAAM,YAAY,GAAG,IAAI,cAAA,CAAA,YAAJ,EAArB;AAIA,QAAM,QAAQ,GAAG,iBAAiB,IAAI,8BAAA,CAAA,4BAAtC;AAKA,QAAM,KAAK,GAAG,QAAQ,CAAC,GAAT,EAAd;;AACA,QAAM,GAAG,GAAG,UAAC,SAAD,EAAwC;AAQlD,UAAM,GAAG,GAAG,QAAQ,CAAC,GAAT,EAAZ;AACA,MAAA,UAAU,CAAC,IAAX,CAAgB;AACd,QAAA,SAAS,EAAE,iBAAiB,GAAG,GAAH,GAAS,SADvB;AAEd,QAAA,OAAO,EAAE,GAAG,GAAG;AAFD,OAAhB;;AAIA,UAAI,CAAC,UAAU,CAAC,MAAhB,EAAwB;AACtB,QAAA,YAAY,CAAC,GAAb,CAAiB,QAAQ,CAAC,GAAD,CAAzB;AACD;AACF,KAhBD;;AAiBA,IAAA,YAAY,CAAC,GAAb,CAAiB,QAAQ,CAAC,GAAD,CAAzB;AACA,WAAO,YAAP;AACD,GA9BM,CAAP;AA+BD;;AAMD,IAAM,wBAAwB,GAAG,sBAAsB,EAAvD","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.animationFrames = void 0;\nvar Observable_1 = require(\"../../Observable\");\nvar Subscription_1 = require(\"../../Subscription\");\nvar performanceTimestampProvider_1 = require(\"../../scheduler/performanceTimestampProvider\");\nvar animationFrameProvider_1 = require(\"../../scheduler/animationFrameProvider\");\nfunction animationFrames(timestampProvider) {\n    return timestampProvider ? animationFramesFactory(timestampProvider) : DEFAULT_ANIMATION_FRAMES;\n}\nexports.animationFrames = animationFrames;\nfunction animationFramesFactory(timestampProvider) {\n    var schedule = animationFrameProvider_1.animationFrameProvider.schedule;\n    return new Observable_1.Observable(function (subscriber) {\n        var subscription = new Subscription_1.Subscription();\n        var provider = timestampProvider || performanceTimestampProvider_1.performanceTimestampProvider;\n        var start = provider.now();\n        var run = function (timestamp) {\n            var now = provider.now();\n            subscriber.next({\n                timestamp: timestampProvider ? now : timestamp,\n                elapsed: now - start\n            });\n            if (!subscriber.closed) {\n                subscription.add(schedule(run));\n            }\n        };\n        subscription.add(schedule(run));\n        return subscription;\n    });\n}\nvar DEFAULT_ANIMATION_FRAMES = animationFramesFactory();\n//# sourceMappingURL=animationFrames.js.map"]},"metadata":{},"sourceType":"script"}