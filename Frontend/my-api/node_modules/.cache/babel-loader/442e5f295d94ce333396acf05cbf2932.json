{"ast":null,"code":"\"use strict\";\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fromEvent = void 0;\n\nvar innerFrom_1 = require(\"../observable/innerFrom\");\n\nvar Observable_1 = require(\"../Observable\");\n\nvar mergeMap_1 = require(\"../operators/mergeMap\");\n\nvar isArrayLike_1 = require(\"../util/isArrayLike\");\n\nvar isFunction_1 = require(\"../util/isFunction\");\n\nvar mapOneOrManyArgs_1 = require(\"../util/mapOneOrManyArgs\");\n\nvar nodeEventEmitterMethods = ['addListener', 'removeListener'];\nvar eventTargetMethods = ['addEventListener', 'removeEventListener'];\nvar jqueryMethods = ['on', 'off'];\n\nfunction fromEvent(target, eventName, options, resultSelector) {\n  if (isFunction_1.isFunction(options)) {\n    resultSelector = options;\n    options = undefined;\n  }\n\n  if (resultSelector) {\n    return fromEvent(target, eventName, options).pipe(mapOneOrManyArgs_1.mapOneOrManyArgs(resultSelector));\n  }\n\n  var _a = __read(isEventTarget(target) ? eventTargetMethods.map(function (methodName) {\n    return function (handler) {\n      return target[methodName](eventName, handler, options);\n    };\n  }) : isNodeStyleEventEmitter(target) ? nodeEventEmitterMethods.map(toCommonHandlerRegistry(target, eventName)) : isJQueryStyleEventEmitter(target) ? jqueryMethods.map(toCommonHandlerRegistry(target, eventName)) : [], 2),\n      add = _a[0],\n      remove = _a[1];\n\n  if (!add) {\n    if (isArrayLike_1.isArrayLike(target)) {\n      return mergeMap_1.mergeMap(function (subTarget) {\n        return fromEvent(subTarget, eventName, options);\n      })(innerFrom_1.innerFrom(target));\n    }\n  }\n\n  if (!add) {\n    throw new TypeError('Invalid event target');\n  }\n\n  return new Observable_1.Observable(function (subscriber) {\n    var handler = function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      return subscriber.next(1 < args.length ? args : args[0]);\n    };\n\n    add(handler);\n    return function () {\n      return remove(handler);\n    };\n  });\n}\n\nexports.fromEvent = fromEvent;\n\nfunction toCommonHandlerRegistry(target, eventName) {\n  return function (methodName) {\n    return function (handler) {\n      return target[methodName](eventName, handler);\n    };\n  };\n}\n\nfunction isNodeStyleEventEmitter(target) {\n  return isFunction_1.isFunction(target.addListener) && isFunction_1.isFunction(target.removeListener);\n}\n\nfunction isJQueryStyleEventEmitter(target) {\n  return isFunction_1.isFunction(target.on) && isFunction_1.isFunction(target.off);\n}\n\nfunction isEventTarget(target) {\n  return isFunction_1.isFunction(target.addEventListener) && isFunction_1.isFunction(target.removeEventListener);\n}","map":{"version":3,"sources":["../../../../src/internal/observable/fromEvent.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fromEvent = void 0;\nvar innerFrom_1 = require(\"../observable/innerFrom\");\nvar Observable_1 = require(\"../Observable\");\nvar mergeMap_1 = require(\"../operators/mergeMap\");\nvar isArrayLike_1 = require(\"../util/isArrayLike\");\nvar isFunction_1 = require(\"../util/isFunction\");\nvar mapOneOrManyArgs_1 = require(\"../util/mapOneOrManyArgs\");\nvar nodeEventEmitterMethods = ['addListener', 'removeListener'];\nvar eventTargetMethods = ['addEventListener', 'removeEventListener'];\nvar jqueryMethods = ['on', 'off'];\nfunction fromEvent(target, eventName, options, resultSelector) {\n    if (isFunction_1.isFunction(options)) {\n        resultSelector = options;\n        options = undefined;\n    }\n    if (resultSelector) {\n        return fromEvent(target, eventName, options).pipe(mapOneOrManyArgs_1.mapOneOrManyArgs(resultSelector));\n    }\n    var _a = __read(isEventTarget(target)\n        ? eventTargetMethods.map(function (methodName) { return function (handler) { return target[methodName](eventName, handler, options); }; })\n        :\n            isNodeStyleEventEmitter(target)\n                ? nodeEventEmitterMethods.map(toCommonHandlerRegistry(target, eventName))\n                : isJQueryStyleEventEmitter(target)\n                    ? jqueryMethods.map(toCommonHandlerRegistry(target, eventName))\n                    : [], 2), add = _a[0], remove = _a[1];\n    if (!add) {\n        if (isArrayLike_1.isArrayLike(target)) {\n            return mergeMap_1.mergeMap(function (subTarget) { return fromEvent(subTarget, eventName, options); })(innerFrom_1.innerFrom(target));\n        }\n    }\n    if (!add) {\n        throw new TypeError('Invalid event target');\n    }\n    return new Observable_1.Observable(function (subscriber) {\n        var handler = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return subscriber.next(1 < args.length ? args : args[0]);\n        };\n        add(handler);\n        return function () { return remove(handler); };\n    });\n}\nexports.fromEvent = fromEvent;\nfunction toCommonHandlerRegistry(target, eventName) {\n    return function (methodName) { return function (handler) { return target[methodName](eventName, handler); }; };\n}\nfunction isNodeStyleEventEmitter(target) {\n    return isFunction_1.isFunction(target.addListener) && isFunction_1.isFunction(target.removeListener);\n}\nfunction isJQueryStyleEventEmitter(target) {\n    return isFunction_1.isFunction(target.on) && isFunction_1.isFunction(target.off);\n}\nfunction isEventTarget(target) {\n    return isFunction_1.isFunction(target.addEventListener) && isFunction_1.isFunction(target.removeEventListener);\n}\n//# sourceMappingURL=fromEvent.js.map"]},"metadata":{},"sourceType":"script"}